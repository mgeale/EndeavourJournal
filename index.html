<!doctype>
<html>
<head>
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="import" href="bower_components/polymer/polymer.html">
  <link rel="import" href="bower_components/google-map/google-map.html">
  <link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
</head>
<body>
  <!-- Page elements -->
  <google-map fit-to-markers></google-map>
  <index-elem></index-elem>

  <!-- Data Binding -->
  <dom-module id="index-elem">
    <template>
      <iron-ajax
        auto
        url="endeavour-journal.json"
        handle-as="json"
        on-response="_on_response">
      </iron-ajax>
    </template>
  </dom-module>
  
  <dom-module id="my-map">
    <template>
      <google-map>
        <template is="dom-repeat" items="{{locations}}" as="user">
          <template is="dom-repeat" items="{{user.trace}}">
            <google-map-marker latitude="{{item.latitude}}" longitude="{{item.longitude}}"></google-map-marker>
          </template>
        </template>
      </google-map>
    </template>
  </dom-module>
  
  <script>
    Polymer({
        is: "index-elem",
        _on_response: function(r) {
            response = r.detail.response;
            list = response;
            console.log(list);
        }
    });
  </script>
    
</body>
</html>
